<!--pages/distribution/stock-logs.wxml - ä»£ç†å•†åº“å­˜å˜åŠ¨æ—¥å¿—-->
<view class="container">
  <!-- åº“å­˜æ¦‚è§ˆ -->
  <view class="stock-header">
    <view class="stock-header-info">
      <text class="stock-header-label">å½“å‰äº‘ä»“åº“å­˜</text>
      <view class="stock-header-row">
        <text class="stock-header-value">{{currentStock}}</text>
        <text class="stock-header-unit">ä»¶</text>
      </view>
    </view>
    <view class="stock-header-btn" bindtap="goRestock">è¡¥è´§</view>
  </view>

  <!-- ç­›é€‰ Tab -->
  <view class="filter-bar">
    <view class="filter-item {{activeFilter === 'all' ? 'active' : ''}}" data-filter="all" bindtap="onFilterChange">å…¨éƒ¨</view>
    <view class="filter-item {{activeFilter === 'in' ? 'active' : ''}}" data-filter="in" bindtap="onFilterChange">
      <text class="filter-dot in"></text>å…¥åº“
    </view>
    <view class="filter-item {{activeFilter === 'out' ? 'active' : ''}}" data-filter="out" bindtap="onFilterChange">
      <text class="filter-dot out"></text>å‡ºåº“
    </view>
  </view>

  <!-- æ—¥å¿—åˆ—è¡¨ -->
  <view class="log-list">
    <view class="log-card {{item.type}}" wx:for="{{logs}}" wx:key="id">
      <view class="log-card-left">
        <view class="log-type-icon {{item.type}}">
          <text wx:if="{{item.type === 'in'}}">ğŸ“¦</text>
          <text wx:else>ğŸšš</text>
        </view>
        <view class="log-card-info">
          <text class="log-card-label">{{item.label}}</text>
          <text class="log-card-product">{{item.product_name}}</text>
          <text class="log-card-detail" wx:if="{{item.type === 'out' && item.buyer_name}}">ä¹°å®¶: {{item.buyer_name}}</text>
          <text class="log-card-detail" wx:if="{{item.type === 'in' && item.amount}}">é‡‘é¢: Â¥{{item.amount}}</text>
          <text class="log-card-time">{{item.time_format}}</text>
        </view>
      </view>
      <view class="log-card-right">
        <text class="log-qty {{item.type}}">{{item.type === 'in' ? '+' : '-'}}{{item.quantity}}</text>
        <text class="log-qty-unit">ä»¶</text>
      </view>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" wx:if="{{logs.length === 0 && !loading}}">
      <text class="empty-icon">ğŸ“‹</text>
      <text class="empty-text">æš‚æ— åº“å­˜å˜åŠ¨è®°å½•</text>
      <view class="empty-btn" bindtap="goRestock">å»é‡‡è´­å…¥ä»“</view>
    </view>

    <!-- åŠ è½½æ›´å¤š -->
    <view class="loading-tip" wx:if="{{loading}}">
      <text>åŠ è½½ä¸­...</text>
    </view>
    <view class="loading-tip" wx:if="{{!hasMore && logs.length > 0}}">
      <text>æ²¡æœ‰æ›´å¤šäº†</text>
    </view>
  </view>
</view>
