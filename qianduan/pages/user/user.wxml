<!--pages/user/user.wxml - ä¸ªäººä¸­å¿ƒ-->
<view class="container">
  <!-- ç”¨æˆ·ä¿¡æ¯åŒº -->
  <view class="user-header">
    <block wx:if="{{isLoggedIn}}">
      <view class="user-info">
        <image class="user-avatar" src="{{userInfo.avatar || ''}}" mode="aspectFill" wx:if="{{userInfo.avatar}}"></image>
        <view class="user-avatar-placeholder" wx:else>
          <text>{{userInfo.nickname ? userInfo.nickname[0] : 'è‡»'}}</text>
        </view>
        <view class="user-detail">
          <text class="user-name">{{userInfo.nickname || 'è‡»é€‰ç”¨æˆ·'}}</text>
          <view class="user-level" wx:if="{{userInfo.level}}">
            <text>{{userInfo.level_name || 'ä¼šå‘˜'}}</text>
          </view>
        </view>
      </view>
    </block>
    <block wx:else>
      <view class="login-prompt">
        <text class="login-title">ç™»å½•åäº«å—æ›´å¤šæƒç›Š</text>
        <button class="btn btn-primary btn-sm" bindtap="onLogin">
          ç«‹å³ç™»å½•
        </button>
      </view>
    </block>
  </view>

  <!-- è®¢å•å…¥å£ -->
  <view class="section-card">
    <view class="section-header" bindtap="onOrderAllTap">
      <text class="section-title">æˆ‘çš„è®¢å•</text>
      <view class="section-more">
        <text>æŸ¥çœ‹å…¨éƒ¨</text>
        <text class="arrow">â€º</text>
      </view>
    </view>
    <view class="order-nav">
      <view class="order-item" bindtap="onOrderTap" data-status="pending">
        <text class="order-icon">ğŸ“</text>
        <text class="order-text">å¾…ä»˜æ¬¾</text>
        <view class="order-badge" wx:if="{{orderCounts.pending > 0}}">{{orderCounts.pending}}</view>
      </view>
      <view class="order-item" bindtap="onOrderTap" data-status="paid">
        <text class="order-icon">ğŸ“¦</text>
        <text class="order-text">å¾…å‘è´§</text>
        <view class="order-badge" wx:if="{{orderCounts.paid > 0}}">{{orderCounts.paid}}</view>
      </view>
      <view class="order-item" bindtap="onOrderTap" data-status="shipped">
        <text class="order-icon">ğŸšš</text>
        <text class="order-text">å¾…æ”¶è´§</text>
        <view class="order-badge" wx:if="{{orderCounts.shipped > 0}}">{{orderCounts.shipped}}</view>
      </view>
      <view class="order-item" bindtap="onOrderTap" data-status="completed">
        <text class="order-icon">âœ“</text>
        <text class="order-text">å·²å®Œæˆ</text>
      </view>
    </view>
  </view>

  <!-- åŠŸèƒ½èœå• -->
  <view class="menu-section">
    <view class="menu-item" bindtap="onMenuTap" data-url="/pages/distribution/center">
      <text class="menu-icon">ğŸ‘¥</text>
      <text class="menu-title">åˆ†é”€ä¸­å¿ƒ</text>
      <text class="menu-arrow">â€º</text>
    </view>
    <view class="menu-item" bindtap="onMenuTap" data-url="/pages/wallet/index">
      <text class="menu-icon">ğŸ’°</text>
      <text class="menu-title">æˆ‘çš„é’±åŒ…</text>
      <text class="menu-arrow">â€º</text>
    </view>
    <view class="menu-item" bindtap="onMenuTap" data-url="/pages/address/list">
      <text class="menu-icon">ğŸ“</text>
      <text class="menu-title">æ”¶è´§åœ°å€</text>
      <text class="menu-arrow">â€º</text>
    </view>
    <view class="menu-item" bindtap="onMenuTap" data-url="">
      <text class="menu-icon">ğŸ§</text>
      <text class="menu-title">è”ç³»å®¢æœ</text>
      <text class="menu-arrow">â€º</text>
    </view>
    <view class="menu-item" bindtap="onMenuTap" data-url="">
      <text class="menu-icon">â„¹ï¸</text>
      <text class="menu-title">å…³äºæˆ‘ä»¬</text>
      <text class="menu-arrow">â€º</text>
    </view>
  </view>

  <!-- åº•éƒ¨ä¿¡æ¯ -->
  <view class="footer">
    <text>è‡»é€‰ Â· ç²¾é€‰å…¨çƒå¥½ç‰©</text>
    <text class="version">v1.0.0</text>
  </view>
</view>
