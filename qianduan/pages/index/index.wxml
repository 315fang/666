<!--pages/index/index.wxml-->
<view class="container">
  <!-- 1. Custom Header (Removed as per user request) -->
  
  <!-- 2. Banner (Figma Style) -->
  <view class="banner-section">
    <swiper class="banner-swiper" indicator-dots="{{true}}" autoplay="{{true}}" circular="{{true}}" indicator-color="rgba(255,255,255,0.4)" indicator-active-color="#ffffff">
      <swiper-item wx:for="{{banners}}" wx:key="id" bindtap="onBannerTap" data-item="{{item}}">
        <view class="banner-item">
          <image src="{{item.image_url}}" mode="aspectFill" class="banner-img"></image>
          <view class="banner-overlay"></view>
          <view class="banner-text">
            <view class="banner-tag">LIMITED EDITION</view>
            <view class="banner-title">春季高奢秀场<br/>限时鉴赏系列</view>
          </view>
        </view>
      </swiper-item>
    </swiper>
  </view>

  <!-- 3. Grid Nav -->
  <view class="nav-grid">
    <view class="nav-item" wx:for="{{topCategories}}" wx:key="id" bindtap="onCategoryTap" data-id="{{item.id}}">
      <view class="nav-icon-box" style="background-color: {{item.bgColor}}">
        <text class="nav-icon">{{item.icon}}</text>
      </view>
      <text class="nav-text">{{item.name}}</text>
    </view>
  </view>

  <!-- 4. Category Tabs -->
  <scroll-view scroll-x class="tab-scroll" enable-flex>
    <view 
      class="tab-item {{currentCategory === 0 ? 'active' : ''}}" 
      bindtap="onCategoryChange" 
      data-id="{{0}}"
    >
      精选推荐
    </view>
    <view 
      class="tab-item {{currentCategory === item.id ? 'active' : ''}}" 
      wx:for="{{categories}}" 
      wx:key="id" 
      bindtap="onCategoryChange" 
      data-id="{{item.id}}"
    >
      {{item.name}}
    </view>
  </scroll-view>

  <!-- 5. Product Waterfall -->
  <view class="product-grid">
    <view class="grid-col">
      <product-card 
        wx:for="{{leftProducts}}" 
        wx:key="id" 
        product="{{item}}" 
        bind:click="onProductTap"
        data-id="{{item.id}}"
      />
    </view>
    <view class="grid-col">
      <product-card 
        wx:for="{{rightProducts}}" 
        wx:key="id" 
        product="{{item}}" 
        bind:click="onProductTap"
        data-id="{{item.id}}"
      />
    </view>
  </view>

  <view class="loading-footer" wx:if="{{loading}}">
    <view class="spinner"></view>
  </view>
</view>
