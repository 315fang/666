<!--pages/index/index.wxml - è‡»é€‰å•†åŸé¦–é¡µ-->
<view class="container">
  <!-- æç®€é¡¶æ  -->
  <view class="header">
    <text class="brand-name">è‡»é€‰</text>
    <view class="header-actions">
      <view class="search-btn" bindtap="onSearchTap">
        <text>ğŸ”</text>
      </view>
    </view>
  </view>

  <!-- ä¸»è§†è§‰åŒºåŸŸ - æ²‰æµ¸å¼å¤§å›¾ -->
  <view class="hero-section">
    <swiper class="hero-swiper" 
            autoplay circular 
            interval="{{5000}}"
            duration="{{800}}"
            wx:if="{{banners.length > 0}}">
      <swiper-item wx:for="{{banners}}" wx:key="id" bindtap="onBannerTap" data-item="{{item}}">
        <image class="hero-image" src="{{item.image_url}}" mode="aspectFill"></image>
        <view class="hero-overlay"></view>
      </swiper-item>
    </swiper>
    <!-- é»˜è®¤å ä½ -->
    <view class="hero-placeholder" wx:else>
      <view class="hero-content">
        <text class="hero-subtitle">PREMIUM SELECTION</text>
        <text class="hero-title">è‡»é€‰å¥½ç‰©</text>
        <text class="hero-desc">å“è´¨ç”Ÿæ´»ï¼Œä»æ­¤å¼€å§‹</text>
      </view>
    </view>
  </view>

  <!-- å“ç‰Œç†å¿µ -->
  <view class="brand-statement">
    <text class="statement-line"></text>
    <text class="statement-text">ç²¾é€‰å…¨çƒä¼˜è´¨å¥½ç‰©</text>
    <text class="statement-line"></text>
  </view>

  <!-- åˆ†ç±»å¯¼èˆª -->
  <scroll-view class="category-nav" scroll-x wx:if="{{categories.length > 0}}">
    <view class="category-item {{currentCategory === '' ? 'active' : ''}}" 
          bindtap="onCategoryTap" data-id="">
      <text>å…¨éƒ¨</text>
    </view>
    <view class="category-item {{currentCategory === item.id ? 'active' : ''}}" 
          wx:for="{{categories}}" wx:key="id"
          bindtap="onCategoryTap" data-id="{{item.id}}">
      <text>{{item.name}}</text>
    </view>
  </scroll-view>

  <!-- ç²¾é€‰å•†å“ -->
  <view class="products-section">
    <view class="section-header">
      <text class="section-title">ç²¾é€‰æ¨è</text>
    </view>

    <!-- å•†å“åˆ—è¡¨ - å¤§å›¾å•åˆ— -->
    <view class="product-list">
      <view class="product-card" 
            wx:for="{{products}}" wx:key="id"
            bindtap="onProductTap" data-item="{{item}}">
        <view class="product-image-wrapper">
          <image class="product-image" 
                 src="{{item.images[0]}}" 
                 mode="aspectFill"></image>
          <view class="product-badge" wx:if="{{item.is_new}}">NEW</view>
        </view>
        <view class="product-info">
          <text class="product-name">{{item.name}}</text>
          <text class="product-desc" wx:if="{{item.subtitle}}">{{item.subtitle}}</text>
          <view class="product-price-row">
            <text class="product-price">{{item.retail_price}}</text>
            <text class="product-original" wx:if="{{item.original_price}}">Â¥{{item.original_price}}</text>
          </view>
        </view>
      </view>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty" wx:if="{{!loading && products.length === 0}}">
      <text class="empty-icon">ğŸ“¦</text>
      <text class="empty-text">æš‚æ— å•†å“</text>
    </view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading" wx:if="{{loading}}">
    <view class="loading-spinner"></view>
  </view>

  <!-- åº•éƒ¨ç•™ç™½ -->
  <view style="height: 120rpx;"></view>
</view>
