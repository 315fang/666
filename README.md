# åˆ†ä½£äº‘åº“å­˜å¾®å•†å°ç¨‹åº (S2B2C Digital Franchise System)

ä¸€ä¸ªåŠŸèƒ½å®Œå–„çš„å¾®ä¿¡å°ç¨‹åºåˆ†é”€ç³»ç»Ÿï¼Œé‡‡ç”¨ S2B2C æ¨¡å¼ï¼Œæ”¯æŒå¤šçº§ä½£é‡‘åˆ†é…ã€äº‘åº“å­˜ç®¡ç†ã€è®¢å•ç®¡ç†ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚

[![License](https://img.shields.io/badge/License-MIT-blue.svg)](LICENSE)
[![Node](https://img.shields.io/badge/Node.js-%3E%3D16.0.0-green.svg)](https://nodejs.org/)
[![WeChat](https://img.shields.io/badge/WeChat-MiniProgram-brightgreen.svg)](https://developers.weixin.qq.com/miniprogram/dev/framework/)

---

## ğŸ“‘ ç›®å½•

- [é¡¹ç›®ç®€ä»‹](#é¡¹ç›®ç®€ä»‹)
- [æŠ€æœ¯æ ˆ](#æŠ€æœ¯æ ˆ)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
- [æ ¸å¿ƒåŠŸèƒ½](#æ ¸å¿ƒåŠŸèƒ½)
- [ç®¡ç†åå°](#ç®¡ç†åå°)
- [å¼€å‘æŒ‡å—](#å¼€å‘æŒ‡å—)
- [éƒ¨ç½²è¯´æ˜](#éƒ¨ç½²è¯´æ˜)
- [API æ–‡æ¡£](#api-æ–‡æ¡£)
- [è´¡çŒ®æŒ‡å—](#è´¡çŒ®æŒ‡å—)

---

## é¡¹ç›®ç®€ä»‹

è¿™æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ S2B2C å¾®ä¿¡å°ç¨‹åºåˆ†é”€ç³»ç»Ÿï¼ŒåŒ…å«ï¼š
- **å‰ç«¯å°ç¨‹åº**ï¼šç”¨æˆ·è´­ç‰©ã€åˆ†é”€ã€è®¢å•ç®¡ç†
- **åç«¯ API æœåŠ¡**ï¼šä¸šåŠ¡é€»è¾‘ã€æ•°æ®ç®¡ç†
- **ç®¡ç†åå°**ï¼šè¿è¥ç®¡ç†ç³»ç»Ÿ

ç³»ç»Ÿæ”¯æŒï¼š

- ğŸ¯ **å¤šçº§åˆ†é”€**ï¼šä¼šå‘˜ã€å›¢é•¿ã€ä»£ç†å•†ä¸‰çº§åˆ†é”€ä½“ç³»
- ğŸ’° **çµæ´»ä½£é‡‘**ï¼šæ”¯æŒå›ºå®šé‡‘é¢å’Œç™¾åˆ†æ¯”ä¸¤ç§ä½£é‡‘æ¨¡å¼
- ğŸ“¦ **äº‘åº“å­˜ç®¡ç†**ï¼šä»£ç†å•†äº‘åº“å­˜ç³»ç»Ÿï¼Œæ”¯æŒè¿›è´§ã€é”€å”®è®°å½•
- ğŸ›’ **å®Œæ•´ç”µå•†**ï¼šå•†å“ã€è´­ç‰©è½¦ã€è®¢å•ã€æ”¯ä»˜ã€ç‰©æµ
- ğŸ **è¥é”€æ´»åŠ¨**ï¼šæŠ½å¥–ã€ç ä»·ã€æ‹¼å›¢ã€ä¼˜æƒ åˆ¸
- ğŸ“Š **æ•°æ®åˆ†æ**ï¼šå®Œå–„çš„ç»Ÿè®¡åˆ†æå’Œä¸šç»©æ’å
- ğŸ‘¥ **å›¢é˜Ÿç®¡ç†**ï¼šå¤šå±‚çº§å›¢é˜Ÿå…³ç³»å’Œä¸šç»©è¿½è¸ª
- ğŸ¤– **AI åŠ©æ‰‹**ï¼šæ™ºèƒ½å®¢æœå’Œç”¨æˆ·åŠ©æ‰‹

---

## æŠ€æœ¯æ ˆ

### å‰ç«¯ï¼ˆWeChat Mini Programï¼‰
- **æ¡†æ¶**ï¼šå¾®ä¿¡å°ç¨‹åºåŸç”Ÿæ¡†æ¶
- **çŠ¶æ€ç®¡ç†**ï¼šè‡ªç ”è½»é‡çº§ Observable Store
- **ç»„ä»¶åº“**ï¼š10+ å¯å¤ç”¨ç»„ä»¶ï¼ˆå•†å“å¡ç‰‡ã€è®¢å•å¡ç‰‡ã€ç©ºçŠ¶æ€ã€éª¨æ¶å±ç­‰ï¼‰
- **å›¾è¡¨**ï¼šECharts
- **å·¥å…·åº“**ï¼šå®Œå–„çš„ Utils å·¥å…·é›†ï¼ˆè¯·æ±‚å°è£…ã€ç¼“å­˜å±‚ã€å›¾ç‰‡æ‡’åŠ è½½ã€é”™è¯¯å¤„ç†ï¼‰

### åç«¯ï¼ˆNode.jsï¼‰
- **è¿è¡Œç¯å¢ƒ**ï¼šNode.js 16+
- **æ¡†æ¶**ï¼šExpress.js
- **ORM**ï¼šSequelize
- **æ•°æ®åº“**ï¼šMySQL 8.0+
- **è®¤è¯**ï¼šJWT Token
- **æ—¥å¿—**ï¼šWinston
- **API æ–‡æ¡£**ï¼šSwagger

### ç®¡ç†åå°ï¼ˆReactï¼‰
- **æ¡†æ¶**ï¼šReact 18
- **UI åº“**ï¼šAnt Design
- **æ„å»ºå·¥å…·**ï¼šVite
- **çŠ¶æ€ç®¡ç†**ï¼šVuex

---

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js >= 16.0.0
- MySQL >= 8.0
- å¾®ä¿¡å¼€å‘è€…å·¥å…·

### åç«¯å®‰è£…

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/315fang/666.git
cd 666/backend

# 2. å®‰è£…ä¾èµ–
npm install

# 3. é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œé…ç½®æ•°æ®åº“è¿æ¥ç­‰ä¿¡æ¯

# 4. åˆå§‹åŒ–æ•°æ®åº“
# æ‰§è¡Œ database/migrations ä¸­çš„è¿ç§»è„šæœ¬

# 5. å¯åŠ¨åç«¯æœåŠ¡
npm run dev
# ç”Ÿäº§ç¯å¢ƒï¼šnpm start
```

åç«¯æœåŠ¡é»˜è®¤è¿è¡Œåœ¨ `http://localhost:3000`

### å‰ç«¯å®‰è£…

```bash
# 1. ä½¿ç”¨å¾®ä¿¡å¼€å‘è€…å·¥å…·æ‰“å¼€é¡¹ç›®
# - æ‰“å¼€å¾®ä¿¡å¼€å‘è€…å·¥å…·
# - é€‰æ‹©ã€Œå¯¼å…¥é¡¹ç›®ã€
# - é€‰æ‹© qianduan ç›®å½•
# - è¾“å…¥ AppIDï¼ˆæˆ–ä½¿ç”¨æµ‹è¯• AppIDï¼‰

# 2. é…ç½® API åœ°å€
# ç¼–è¾‘ qianduan/utils/request.js ä¸­çš„ baseUrl
```

### ç®¡ç†åå°å®‰è£…

```bash
# 1. è¿›å…¥ç®¡ç†åå°ç›®å½•
cd backend/admin-ui

# 2. å®‰è£…ä¾èµ–
npm install

# 3. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm start
# è®¿é—® http://localhost:3001
```

---

## é¡¹ç›®ç»“æ„

```
666/
â”œâ”€â”€ backend/                 # åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ admin-ui/           # ç®¡ç†åå°ï¼ˆReact + Viteï¼‰
â”‚   â”œâ”€â”€ cache/              # ç¼“å­˜æ–‡ä»¶
â”‚   â”œâ”€â”€ config/             # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ controllers/        # æ§åˆ¶å™¨ï¼ˆ40+ï¼‰
â”‚   â”œâ”€â”€ database/           # æ•°æ®åº“é…ç½®
â”‚   â”œâ”€â”€ middleware/         # ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ migrations/         # æ•°æ®åº“è¿ç§»
â”‚   â”œâ”€â”€ models/             # æ•°æ®æ¨¡å‹ï¼ˆ50+ï¼‰
â”‚   â”œâ”€â”€ modules/            # æ¨¡å—ï¼ˆAI ç­‰ï¼‰
â”‚   â”œâ”€â”€ routes/             # è·¯ç”±å’Œæ§åˆ¶å™¨
â”‚   â”‚   â”œâ”€â”€ admin/          # ç®¡ç†å‘˜è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ api/            # API è·¯ç”±
â”‚   â”‚   â””â”€â”€ auth/           # è®¤è¯è·¯ç”±
â”‚   â”œâ”€â”€ services/           # ä¸šåŠ¡é€»è¾‘æœåŠ¡
â”‚   â”œâ”€â”€ utils/              # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ app.js              # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ server.js           # æœåŠ¡å™¨å…¥å£
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ qianduan/                # å‰ç«¯å°ç¨‹åº
â”‚   â”œâ”€â”€ assets/             # é™æ€èµ„æº
â”‚   â”‚   â”œâ”€â”€ icons/          # å›¾æ ‡
â”‚   â”‚   â””â”€â”€ images/         # å›¾ç‰‡
â”‚   â”œâ”€â”€ components/         # å¯å¤ç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ address-card/   # åœ°å€å¡ç‰‡ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ empty-state/    # ç©ºçŠ¶æ€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ loading-skeleton/  # éª¨æ¶å±ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ order-card/     # è®¢å•å¡ç‰‡ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ product-card/   # å•†å“å¡ç‰‡ç»„ä»¶
â”‚   â”‚   â””â”€â”€ ui/             # UI åŸºç¡€ç»„ä»¶
â”‚   â”œâ”€â”€ config/             # é…ç½®æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ constants.js    # å¸¸é‡é…ç½®
â”‚   â”œâ”€â”€ ec-canvas/          # ECharts å›¾è¡¨ç»„ä»¶
â”‚   â”œâ”€â”€ pages/              # é¡µé¢ï¼ˆ40+ï¼‰
â”‚   â”‚   â”œâ”€â”€ index/          # é¦–é¡µ
â”‚   â”‚   â”œâ”€â”€ category/       # åˆ†ç±»
â”‚   â”‚   â”œâ”€â”€ activity/       # æ´»åŠ¨
â”‚   â”‚   â”œâ”€â”€ cart/           # è´­ç‰©è½¦
â”‚   â”‚   â”œâ”€â”€ user/           # ä¸ªäººä¸­å¿ƒ
â”‚   â”‚   â”œâ”€â”€ order/          # è®¢å•
â”‚   â”‚   â”œâ”€â”€ distribution/   # åˆ†é”€ä¸­å¿ƒ
â”‚   â”‚   â”œâ”€â”€ ai/             # AI åŠ©æ‰‹
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ store/              # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â””â”€â”€ index.js        # å…¨å±€ Store
â”‚   â”œâ”€â”€ utils/              # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ request.js      # ç½‘ç»œè¯·æ±‚å°è£…
â”‚   â”‚   â”œâ”€â”€ requestCache.js # è¯·æ±‚ç¼“å­˜å±‚
â”‚   â”‚   â”œâ”€â”€ imageLazyLoader.js  # å›¾ç‰‡æ‡’åŠ è½½
â”‚   â”‚   â”œâ”€â”€ errorHandler.js # é”™è¯¯å¤„ç†
â”‚   â”‚   â”œâ”€â”€ dataFormatter.js    # æ•°æ®æ ¼å¼åŒ–
â”‚   â”‚   â””â”€â”€ helpers.js      # é€šç”¨å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ app.js              # å°ç¨‹åºå…¥å£
â”‚   â”œâ”€â”€ app.json            # å°ç¨‹åºé…ç½®
â”‚   â””â”€â”€ project.config.json # é¡¹ç›®é…ç½®
â”‚
â””â”€â”€ docs/                   # æ–‡æ¡£
    â”œâ”€â”€ README.md           # æœ¬æ–‡æ¡£
    â””â”€â”€ ...
```

---

## æ ¸å¿ƒåŠŸèƒ½

### 1. ç”¨æˆ·ç³»ç»Ÿ
- å¾®ä¿¡ç™»å½•
- è§’è‰²ç®¡ç†ï¼ˆæ™®é€šç”¨æˆ·ã€ä¼šå‘˜ã€å›¢é•¿ã€ä»£ç†å•†ï¼‰
- ä¸ªäººä¿¡æ¯ç®¡ç†
- é‚€è¯·æ³¨å†Œ

### 2. å•†å“ç®¡ç†
- å•†å“åˆ—è¡¨å’Œè¯¦æƒ…
- åˆ†ç±»æµè§ˆ
- æœç´¢åŠŸèƒ½
- SKU ç®¡ç†
- ä»·æ ¼ä½“ç³»ï¼ˆé›¶å”®ä»·ã€æ‰¹å‘ä»·ã€ä¼šå‘˜ä»·ç­‰ï¼‰

### 3. è®¢å•ç³»ç»Ÿ
- ä¸‹å•æµç¨‹
- è®¢å•ç®¡ç†ï¼ˆå¾…ä»˜æ¬¾ã€å¾…å‘è´§ã€å¾…æ”¶è´§ã€å·²å®Œæˆï¼‰
- è®¢å•çŠ¶æ€è·Ÿè¸ª
- é€€æ¬¾å¤„ç†
- ç‰©æµé…é€

### 4. åˆ†é”€ç³»ç»Ÿ
- ä¸‰çº§åˆ†é”€ä½“ç³»
- å¤šç§ä½£é‡‘æ¨¡å¼
  - å›ºå®šé‡‘é¢æ¨¡å¼
  - ç™¾åˆ†æ¯”æ¨¡å¼
- å›¢é˜Ÿç®¡ç†
- ä¸šç»©ç»Ÿè®¡
- ä½£é‡‘æç°

### 5. åº“å­˜ç®¡ç†
- äº‘åº“å­˜ç³»ç»Ÿï¼ˆä»£ç†å•†ï¼‰
- è¿›è´§è®°å½•
- é”€å”®è®°å½•
- åº“å­˜ç»Ÿè®¡

### 6. è¥é”€æ´»åŠ¨
- ğŸ° å¹¸è¿æŠ½å¥–
- ğŸ”ª ç ä»·æ´»åŠ¨
- ğŸ‘¥ æ‹¼å›¢æ´»åŠ¨
- ğŸ« ä¼˜æƒ åˆ¸ç³»ç»Ÿ
- ğŸ“¦ ç§’æ€æ´»åŠ¨

### 7. ç§¯åˆ†ç³»ç»Ÿ
- ç§¯åˆ†è·å–
- ç§¯åˆ†æ¶ˆè´¹
- ç§¯åˆ†å•†åŸ

### 8. AI åŠ©æ‰‹
- æ™ºèƒ½å®¢æœ
- ç”¨æˆ·åŠ©æ‰‹
- é—®å·è°ƒç ”

### 9. ç®¡ç†åå°
- æ•°æ®çœ‹æ¿
- å•†å“ç®¡ç†
- è®¢å•ç®¡ç†
- ç”¨æˆ·ç®¡ç†
- ä½£é‡‘ç®¡ç†
- ç»Ÿè®¡æŠ¥è¡¨
- å†…å®¹ç®¡ç†
- ç³»ç»Ÿé…ç½®

---

## ç®¡ç†åå°

ç®¡ç†åå°æä¾›äº†å®Œæ•´çš„è¿è¥ç®¡ç†èƒ½åŠ›ï¼š

### åŠŸèƒ½æ¨¡å—
- **Dashboard**ï¼šæ•°æ®æ¦‚è§ˆå’Œç»Ÿè®¡
- **å•†å“ç®¡ç†**ï¼šå•†å“ä¸Šä¸‹æ¶ã€åº“å­˜ç®¡ç†
- **è®¢å•ç®¡ç†**ï¼šè®¢å•å¤„ç†ã€å‘è´§ã€é€€æ¬¾
- **ç”¨æˆ·ç®¡ç†**ï¼šç”¨æˆ·åˆ—è¡¨ã€è§’è‰²ç®¡ç†
- **åˆ†é”€ç®¡ç†**ï¼šä»£ç†å•†ç®¡ç†ã€ä½£é‡‘è®¾ç½®
- **å†…å®¹ç®¡ç†**ï¼šæ–‡ç« ã€ç´ æç®¡ç†
- **ç³»ç»Ÿé…ç½®**ï¼šå‚æ•°é…ç½®ã€æƒé™ç®¡ç†

### è®¿é—®åœ°å€
- å¼€å‘ç¯å¢ƒï¼š`http://localhost:3001`
- ç”Ÿäº§ç¯å¢ƒï¼š`http://your-domain.com/admin`

---

## å¼€å‘æŒ‡å—

### ä»£ç è§„èŒƒ

é¡¹ç›®éµå¾ªä»¥ä¸‹ä»£ç è§„èŒƒï¼š

1. **å‘½åè§„èŒƒ**
   - æ–‡ä»¶åï¼šå°å†™å­—æ¯ + è¿å­—ç¬¦ï¼ˆkebab-caseï¼‰
   - å˜é‡åï¼šé©¼å³°å‘½åï¼ˆcamelCaseï¼‰
   - å¸¸é‡åï¼šå¤§å†™å­—æ¯ + ä¸‹åˆ’çº¿ï¼ˆUPPER_SNAKE_CASEï¼‰
   - ç»„ä»¶åï¼šå¸•æ–¯å¡å‘½åï¼ˆPascalCaseï¼‰

2. **æ³¨é‡Šè§„èŒƒ**
   - æ‰€æœ‰å‡½æ•°å¿…é¡»æœ‰ JSDoc æ³¨é‡Š
   - å¤æ‚é€»è¾‘éœ€è¦è¡Œå†…æ³¨é‡Š
   - å…³é”®ä¸šåŠ¡é€»è¾‘éœ€è¦è¯¦ç»†è¯´æ˜

3. **æ¨¡å—åŒ–**
   - ä½¿ç”¨ CommonJS æ¨¡å—ç³»ç»Ÿï¼ˆå¾®ä¿¡å°ç¨‹åºå…¼å®¹ï¼‰
   - é¿å…å¾ªç¯ä¾èµ–
   - åˆç†æ‹†åˆ†æ¨¡å—

### ä½¿ç”¨å·¥å…·å‡½æ•°

é¡¹ç›®æä¾›äº†ä¸°å¯Œçš„å·¥å…·å‡½æ•°ï¼Œå¼€å‘æ—¶åº”ä¼˜å…ˆä½¿ç”¨ï¼š

```javascript
// æ•°æ®æ ¼å¼åŒ–
const { parseImages, formatMoney, formatTime } = require('../../utils/dataFormatter');

// è¡¨å•éªŒè¯
const { validatePhone, validateEmail, isEmpty } = require('../../utils/helpers');

// é”™è¯¯å¤„ç†
const { ErrorHandler, showError, showSuccess } = require('../../utils/errorHandler');

// å¸¸é‡é…ç½®
const { USER_ROLES, ORDER_STATUS, ORDER_STATUS_TEXT } = require('../../config/constants');
```

### ä½¿ç”¨ç»„ä»¶

é¡¹ç›®æä¾›äº†å¯å¤ç”¨ç»„ä»¶ï¼Œé¿å…é‡å¤ä»£ç ï¼š

```xml
<!-- ç©ºçŠ¶æ€ç»„ä»¶ -->
<empty-state
  icon="/assets/images/empty-cart.svg"
  title="è´­ç‰©è½¦æ˜¯ç©ºçš„"
  description="å¿«å»æŒ‘é€‰å¿ƒä»ªçš„å•†å“å§"
  buttonText="å»é€›é€›"
  bind:buttonclick="onGoShopping"
/>

<!-- éª¨æ¶å±ç»„ä»¶ -->
<loading-skeleton loading="{{loading}}" type="product-card">
  <product-list products="{{products}}" />
</loading-skeleton>

<!-- è®¢å•å¡ç‰‡ç»„ä»¶ -->
<order-card
  order="{{orderItem}}"
  showActions="{{true}}"
  bind:pay="onPayOrder"
  bind:cancel="onCancelOrder"
/>

<!-- åœ°å€å¡ç‰‡ç»„ä»¶ -->
<address-card
  address="{{addressItem}}"
  selected="{{selectedId === addressItem.id}}"
  bind:cardtap="onSelectAddress"
/>
```

### çŠ¶æ€ç®¡ç†

ä½¿ç”¨å…¨å±€ Store ç®¡ç†ç”¨æˆ·å’Œè´­ç‰©è½¦çŠ¶æ€ï¼š

```javascript
const globalStore = require('../../store/index');

// è·å–çŠ¶æ€
const userInfo = globalStore.get('userInfo');
const cartCount = globalStore.get('cartCount');

// æ›´æ–°çŠ¶æ€
globalStore.set('cartCount', 5);

// æ‰§è¡Œ Action
await globalStore.dispatch('login', { userInfo, openid, token });
await globalStore.dispatch('addToCart', cartItem);

// è®¢é˜…çŠ¶æ€å˜åŒ–
const unsubscribe = globalStore.subscribe('cartCount', (newValue) => {
  this.setData({ cartCount: newValue });
});
```

### è¯·æ±‚ç¼“å­˜

ä½¿ç”¨è¯·æ±‚ç¼“å­˜å‡å°‘ç½‘ç»œè¯·æ±‚ï¼š

```javascript
const { cachedGet } = require('../../utils/requestCache');
const { get } = require('../../utils/request');

// ä½¿ç”¨ç¼“å­˜ï¼ˆé»˜è®¤ 5 åˆ†é’Ÿï¼‰
const data = await cachedGet(get, '/products', { page: 1 });

// è‡ªå®šä¹‰ç¼“å­˜æ—¶é•¿
const data = await cachedGet(get, '/config', {}, { cacheTTL: 30 * 60 * 1000 });

// ä¸ä½¿ç”¨ç¼“å­˜
const data = await cachedGet(get, '/orders', {}, { useCache: false });
```

### å›¾ç‰‡æ‡’åŠ è½½

ä½¿ç”¨å›¾ç‰‡æ‡’åŠ è½½æå‡æ€§èƒ½ï¼š

```javascript
const { imageLazyLoader } = require('../../utils/imageLazyLoader');

// åœ¨é¡µé¢ä¸­
Page({
  onReady() {
    // å¯ç”¨æ‡’åŠ è½½
    imageLazyLoader.observe(this, '.product-image', (res) => {
      const imageSrc = res.dataset.src;
      // åŠ è½½å›¾ç‰‡
      imageLazyLoader.loadImage(imageSrc);
    });
  },

  onUnload() {
    // æ¸…ç† observer
    imageLazyLoader.disconnectAll();
  }
});
```

---

## éƒ¨ç½²è¯´æ˜

### åç«¯éƒ¨ç½²

```bash
# 1. æ„å»ºï¼ˆå¦‚éœ€è¦ï¼‰
npm run build

# 2. é…ç½®ç”Ÿäº§ç¯å¢ƒå˜é‡
vi .env.production

# 3. å¯åŠ¨æœåŠ¡
npm start

# æˆ–ä½¿ç”¨ PM2
pm2 start app.js --name "mini-program-api"
```

### å‰ç«¯éƒ¨ç½²

1. ä½¿ç”¨å¾®ä¿¡å¼€å‘è€…å·¥å…·æ‰“å¼€é¡¹ç›®
2. ç‚¹å‡»ã€Œä¸Šä¼ ã€æŒ‰é’®
3. å¡«å†™ç‰ˆæœ¬å·å’Œæè¿°
4. æäº¤å®¡æ ¸
5. å®¡æ ¸é€šè¿‡åå‘å¸ƒ

### Nginx é…ç½®ç¤ºä¾‹

```nginx
server {
    listen 80;
    server_name api.jxalk.cn;

    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }
}
```

---

## API æ–‡æ¡£

### è®¤è¯æ¥å£

#### POST /auth/login
å¾®ä¿¡ç™»å½•

**è¯·æ±‚å‚æ•°ï¼š**

```json
{
  "code": "å¾®ä¿¡ç™»å½• code"
}
```

**å“åº”ï¼š**

```json
{
  "code": 0,
  "message": "ç™»å½•æˆåŠŸ",
  "data": {
    "token": "jwt_token",
    "openid": "user_openid",
    "userInfo": { ... }
  }
}
```

### å•†å“æ¥å£

#### GET /api/products
è·å–å•†å“åˆ—è¡¨

**æŸ¥è¯¢å‚æ•°ï¼š**
- `page`: é¡µç ï¼ˆé»˜è®¤ 1ï¼‰
- `limit`: æ¯é¡µæ•°é‡ï¼ˆé»˜è®¤ 10ï¼‰
- `category_id`: åˆ†ç±» ID
- `keyword`: æœç´¢å…³é”®è¯

**å“åº”ï¼š**

```json
{
  "code": 0,
  "data": {
    "list": [ ... ],
    "total": 100,
    "page": 1,
    "limit": 10
  }
}
```

æ›´å¤š API æ–‡æ¡£è¯·è®¿é—®ï¼š`http://localhost:3000/api-docs`

---

## è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

### ä»£ç å®¡æŸ¥æ ‡å‡†

- ä»£ç ç¬¦åˆè§„èŒƒ
- æœ‰é€‚å½“çš„æ³¨é‡Š
- é€šè¿‡æ‰€æœ‰æµ‹è¯•
- ä¸å¼•å…¥æ–°çš„å®‰å…¨é£é™©
- æ€§èƒ½æ²¡æœ‰æ˜æ˜¾ä¸‹é™

---

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚è¯¦è§ [LICENSE](./LICENSE) æ–‡ä»¶ã€‚

---

## è”ç³»æ–¹å¼

- é¡¹ç›®åœ°å€ï¼šhttps://github.com/315fang/666
- é—®é¢˜åé¦ˆï¼šhttps://github.com/315fang/666/issues

---

## æ›´æ–°æ—¥å¿—

### v2.0.0 (2026-02-10)
- âœ¨ æ–°å¢è¯·æ±‚ç¼“å­˜å±‚ï¼Œæå‡æ€§èƒ½
- âœ¨ æ–°å¢å›¾ç‰‡æ‡’åŠ è½½åŠŸèƒ½
- âœ¨ å®Œå–„çŠ¶æ€ç®¡ç†ç³»ç»Ÿ
- âœ¨ æ–°å¢ 4 ä¸ªå¯å¤ç”¨ç»„ä»¶
- ğŸ› ä¿®å¤ ES6 æ¨¡å—å…¼å®¹æ€§é—®é¢˜
- ğŸ› ä¿®å¤ 401 token åˆ·æ–°å¾ªç¯é—®é¢˜
- ğŸ“ å®Œå–„é¡¹ç›®æ–‡æ¡£

### v1.0.0 (2025-12-01)
- ğŸ‰ åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- âœ¨ å®Œæ•´çš„åˆ†é”€ç³»ç»Ÿ
- âœ¨ è®¢å•ç®¡ç†åŠŸèƒ½
- âœ¨ åº“å­˜ç®¡ç†åŠŸèƒ½
- âœ¨ ç®¡ç†åå°

---

**Built with â¤ï¸ by Team**
